<html>
<head>
	<title></title>
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
	<script type="text/javascript" src="js/vendor/jquery-2.1.4.min.js"></script>
	<script type="text/javascript" src="js/vendor/jquery-ui.min.js"></script>
	<link rel="stylesheet" href="css/vendor/jquery-ui.min.css">

	<link rel="stylesheet" href="styles.css">
</head>
<script type="text/javascript" src='stateCheck.js'></script>
<script type="text/javascript" src='visDrawer.js'></script>
<script type="text/javascript" src='treemapDrawer.js'></script>
<!--<script type="text/javascript" src="flare.json"></script>-->
<script type="text/javascript" src='sunburstDrawer.js'></script>
<script type="text/javascript" src='showVis.js'></script>
<body>


	<div class ="container">
		<div id= "warningbar">
			<p>Please do not refresh the page!</p>
		</div>
		<div id="container">
		<div id="viscontainer">
			
			<script type="text/javascript">
					 var queryString = decodeURIComponent(window.location.search);
				   
				   	var currentStringindex=queryString.split("=")
				   	var currentindx=parseInt(currentStringindex[1])
				   var personSarray=[];
				   var myArray=[];
				   	var compState,visState,changeState,dataState;
				 	window.onload = function() {
				 		myArray = sessionStorage.getItem('myArray');
				 		console.log(myArray)
				 		personSarray=myArray.split("DOT,")
				 		console.log(personSarray)
				 		var states=personSarray[currentindx].split(",");
				 		compState=states[0];
				 		visState=states[1];
				 		changeState=states[2];
				 		dataState=states[3];
				 		updateVis("#viscontainer","viscontainer",compState,visState,changeState,dataState)
				 		//updateVis("#viscontainer","#viscontainer","Animation","sunburst","remove","small")


				 	}
				 	function submitAnswer(){
				 		if (currentindx+1 >= personSarray.length){
				 			alert("Thank you for participating. Your session is over!")
				 		}else{
				 			alert("press ok to move to the next task")
				 		}
				 		
				 		currentindx++;
				 		var states=personSarray[currentindx].split(",");
				 		compState=states[0];
				 		console.log(compState)
				 		visState=states[1];
				 		changeState=states[2];
				 		dataState=states[3];
				 		//if (compState!="Animation"){//should load next html page
				 			
				 			 sessionStorage.setItem('myArray', myArray);
				 			var queryString = "?para1=" + currentindx;
				 			window.location.href = compState+".html" + queryString;
				 			//window.open(comparisonType+".html", "_self");


				 	//	}else{
				 			//updateVis("#viscontainer","#viscontainer",compState,visState,changeState,dataState)
				 		//}
				 	//	updateVis("#viscontainer","#viscontainer","Animation","sunburst","add","small")
				 		
				 	}


				

			</script> 
			</div>
			<div id="buttonsbar">
				<input type="button" class ="animatebutton" id="startbutton" value="start" >
	         	<input type="button" class ="animatebutton" id="resetbutton" value="reset">
			</div>
		</div>
		<div id="questionbar"> 
			<div class="questionbar" id="questionDescription">
				Please choose the node that you have detected to be moved, added, or removed:
			</div>
				
		

			<div class="questionbar" id="choices">
				<input type="radio"  name="choice" value="first"/>
				<label id="1choice">
        			
        		  </label>
			
				  <input type="radio" name="choice" value="second">
				  <label id="2choice">
        			
        		  </label>
        		
  				
				<input type="radio" name="choice" value="third"> 			
					<label id="3choice">
        			
        		  </label>
				<input type="radio" name="choice" value="fourth">
				<label id="4choice">
    			
    		  </label> 
			</div>
			<div id="submitbuttondiv">
				<input type="button" class ="submitbutton" id="submit" value="submit" onclick="submitAnswer();">
			</div>
			



		</div>
		
	</div>
</body>